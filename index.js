const { Client, IntentsBitField, PermissionsBitField } = require('discord.js'); // เพิ่ม PermissionsBitField
const axios = require('axios');

// สร้าง Client ใหม่
const client = new Client({
  intents: [
    IntentsBitField.Flags.Guilds,
    IntentsBitField.Flags.GuildMessages,
    IntentsBitField.Flags.MessageContent,
    IntentsBitField.Flags.GuildMessageReactions
  ],
});

// คำสั่งข้อความปลอบใจเพื่อนอกหักแบบสุ่ม
const comfortingMessages = [
    "อย่าไปใส่ใจเลย เขาก็คงไม่รู้หรอกว่าทำให้เธอเจ็บ... ส่วนฉันรู้! ไม่ต้องกังวลนะ, เราจะผ่านไปด้วยกัน!",
    "ถึงจะอกหัก แต่เธอยังมีฉันอยู่ และฉันก็ไม่ลืมเธอหรอก... ถึงแม้เธอจะบอกว่าไม่ต้องการก็ตาม!",
    "ไม่ต้องเศร้าไปเลยนะ ตอนนี้หัวใจเราอาจจะแตก แต่ความห่วงใยจากฉันยังอยู่เต็มใจเสมอ!",
    "เธอจะต้องผ่านไปได้แน่นอน... ตอนนี้แค่พักบ้างก็พอ อย่าลืมว่าไม่ว่าจะยังไง ฉันก็จะอยู่ข้าง ๆ เธอ!",
    "เธอไม่ต้องบอกว่าไม่ต้องการ ฉันจะไม่ลืมเธอ ไม่ว่าเธอจะไปไกลแค่ไหน!",
    "มันไม่ใช่คน มันแค่ขยะที่เดินได้ อย่าไปเสียเวลากับมันเลย!",
    "ถ้ามันไม่รู้จักดี ก็ปล่อยให้มันจมลงไปกับความเลวของมันเอง!",
    "คนแบบมันไม่สมควรได้อยู่ใกล้คนดีๆอย่างเธอ!",
    "มันไม่ใช่คนที่ใช่ มันแค่คนที่ทำให้เธอเสียเวลา!",
    "อย่าให้คนที่ไม่มีหัวใจมาทำให้เธอเสียใจ!",
    "มันไม่ใช่คน มันแค่เศษเสี้ยวของความผิดหวัง!",
    "ถ้ามันไม่เห็นค่าเธอ ก็ปล่อยให้มันไปอยู่ในที่ที่มันควรอยู่!",
    "คนที่ทำให้เธอเจ็บปวด ไม่สมควรได้เห็นรอยยิ้มของเธอ!",
    "มันไม่ใช่คนที่เธอควรเสียใจให้ มันแค่บทเรียนที่เธอต้องผ่านไป!",
    "ถ้ามันไม่รู้จักดี ก็ปล่อยให้มันไป ไม่ต้องห่วง!",
    "ชีวิตคนแบบมันไม่เคยดีพอสำหรับคนอย่างเธออยู่แล้ว!",
    "อย่าให้หัวใจของเธอต้องเจ็บเพราะคนที่ไม่มีความรู้สึก!",
    "มันไม่ใช่คนที่ใช่ แค่เป็นบทเรียนที่เธอต้องผ่านไป!",
    "ถ้ามันไม่เห็นค่าเธอ ก็ปล่อยให้มันไปเลย ไม่ต้องเสียใจ!",
    "คนที่ทำให้เธอเสียใจ ไม่สมควรได้อยู่ข้างๆเธอ!",
    "อย่าให้คนที่ไม่มีความรู้สึกมาทำลายความสุขของเธอ!",
    "มันไม่ใช่คนที่เธอควรเสียใจให้หรอก!",
    "ถ้ามันไม่รู้จักดี ก็ปล่อยให้มันไป ไม่ต้องห่วง!",
    "มันไม่ใช่คน มันแค่ขยะที่เดินได้ อย่าไปเสียเวลากับมันเลย!",
    "ถ้ามันไม่รู้จักดี ก็ปล่อยให้มันจมลงไปกับความเลวของมันเอง!",
    "คนแบบมันไม่สมควรได้อยู่ใกล้คนดีๆอย่างเธอ!",
    "มันไม่ใช่คนที่ใช่ มันแค่คนที่ทำให้เธอเสียเวลา!",
    "อย่าให้คนที่ไม่มีหัวใจมาทำให้เธอเสียใจ!",
    "มันไม่ใช่คน มันแค่เศษเสี้ยวของความผิดหวัง!",
    "ถ้ามันไม่เห็นค่าเธอ ก็ปล่อยให้มันไปอยู่ในที่ที่มันควรอยู่!",
    "คนที่ทำให้เธอเจ็บปวด ไม่สมควรได้เห็นรอยยิ้มของเธอ!",
    "มันไม่ใช่คนที่เธอควรเสียใจให้ มันแค่บทเรียนที่เธอต้องผ่านไป!",
    "ถ้ามันไม่รู้จักดี ก็ปล่อยให้มันไป ไม่ต้องห่วง!",
    "ชีวิตคนแบบมันไม่เคยดีพอสำหรับคนอย่างเธออยู่แล้ว!",
    "อย่าให้หัวใจของเธอต้องเจ็บเพราะคนที่ไม่มีความรู้สึก!",
    "มันไม่ใช่คนที่ใช่ แค่เป็นบทเรียนที่เธอต้องผ่านไป!",
    "ถ้ามันไม่เห็นค่าเธอ ก็ปล่อยให้มันไปเลย ไม่ต้องเสียใจ!",
    "คนที่ทำให้เธอเสียใจ ไม่สมควรได้อยู่ข้างๆเธอ!",
    "อย่าให้คนที่ไม่มีความรู้สึกมาทำลายความสุขของเธอ!",
    "มันไม่ใช่คนที่เธอควรเสียใจให้หรอก!",
    "ถ้ามันไม่รู้จักดี ก็ปล่อยให้มันไป ไม่ต้องห่วง!",
    "มันไม่ใช่คน มันแค่ขยะที่เดินได้ อย่าไปเสียเวลากับมันเลย!",
    "ถ้ามันไม่รู้จักดี ก็ปล่อยให้มันจมลงไปกับความเลวของมันเอง!",
    "คนแบบมันไม่สมควรได้อยู่ใกล้คนดีๆอย่างเธอ!",
    "มันไม่ใช่คนที่ใช่ มันแค่คนที่ทำให้เธอเสียเวลา!",
    "อย่าให้คนที่ไม่มีหัวใจมาทำให้เธอเสียใจ!",
    "มันไม่ใช่คน มันแค่เศษเสี้ยวของความผิดหวัง!",
    "ถ้ามันไม่เห็นค่าเธอ ก็ปล่อยให้มันไปอยู่ในที่ที่มันควรอยู่!",
    "คนที่ทำให้เธอเจ็บปวด ไม่สมควรได้เห็นรอยยิ้มของเธอ!",
    "มันไม่ใช่คนที่เธอควรเสียใจให้ มันแค่บทเรียนที่เธอต้องผ่านไป!",
    "ถ้ามันไม่รู้จักดี ก็ปล่อยให้มันไป ไม่ต้องห่วง!"
];

// Event เมื่อบอทพร้อมทำงาน
client.on('ready', () => {
    console.log(`Logged in as ${client.user.tag}!`);
    console.log("Bot is running!");
});

// Event เมื่อมีข้อความใหม่
client.on('messageCreate', async (message) => {
  // ตรวจสอบว่าข้อความไม่ใช่จากบอทเอง
  if (message.author.bot) return;

  // คำสั่ง !joke สำหรับส่งข้อความปลอบใจ
  if (message.content === '!joke') {
    const randomMessage = comfortingMessages[Math.floor(Math.random() * comfortingMessages.length)];
    message.channel.send(randomMessage);
  }

  // คำสั่ง !roll สำหรับทอยลูกเต๋า
  if (message.content === '!roll') {
    const roll = Math.floor(Math.random() * 6) + 1;
    message.channel.send(`คุณทอยได้: ${roll}`);
  }

  // คำสั่ง !meme สำหรับสร้าง Meme อัตโนมัติ
  if (message.content === '!meme') {
    try {
      const response = await axios.get('https://meme-api.com/gimme');
      const meme = response.data;
      message.reply(meme.url);
    } catch (error) {
      message.reply('ขอโทษที ไม่สามารถดึง Meme ได้ตอนนี้ 😅');
    }
  }
});

// ล็อกอินบอทด้วย Token
client.login('MTMzNjc2MjkyNjU5NzUzNzg2NA.GS90r5.G9Qxc3Yl8UjgQf1oNMbJX-5gwaNI3EwgLUg96M'); // อย่าลืมเปลี่ยนเป็น Token ของคุณ
